---
title: exhaustive-deps
---

**Full Name in `@eslint-react/eslint-plugin@beta`**

```plain copy
@eslint-react/exhaustive-deps
```

**Full Name in `eslint-plugin-react-x@beta`**

```plain copy
react-x/exhaustive-deps
```

**Presets**

`x`
`recommended`
`recommended-typescript`
`recommended-type-checked`
`strict`
`strict-typescript`
`strict-type-checked`

**Features**

`âš™ï¸` `ðŸ”§`

## Description

Enforces that React hook dependency arrays contain all reactive values used in the callback.

When using hooks like `useEffect`, `useMemo`, or `useCallback`, the dependency array must include every reactive value referenced inside the callback. Missing dependencies can lead to stale closures and subtle bugs where the callback uses outdated values. Unnecessary dependencies can cause the hook to re-run more often than needed.

This rule checks the following built-in hooks: `useEffect`, `useLayoutEffect`, `useInsertionEffect`, `useMemo`, `useCallback`, and `useImperativeHandle`.

### Stable values

The rule recognizes values that React guarantees to be stable across renders and does not require them in the dependency array:

- `setState` function from `useState`
- `dispatch` function from `useReducer`
- `ref` object from `useRef`
- `startTransition` function from `useTransition`
- Module-level constants and imports

### Autofix behavior

When missing or unnecessary dependencies are detected, the rule provides an automatic fix that:

- Adds missing dependencies to the array, sorted alphabetically
- Removes unnecessary dependencies from the array
- Preserves existing valid dependencies

When the dependency array is not an array literal (e.g., a variable reference), the rule reports a diagnostic but does not provide an autofix.

## Rule Options

```ts
type Options = {
  additionalHooks?: string;
};
```

### `additionalHooks`

A regex pattern specifying custom hooks that accept dependency arrays. When provided, the rule applies dependency checking to hooks whose names match the pattern.

Default: not set (only built-in hooks are checked)

## Examples

### Passing

```tsx
import { useEffect, useState } from "react";

function MyComponent({ id }) {
  const [data, setData] = useState(null);

  useEffect(() => {
    fetchData(id).then(setData);
  }, [id]);

  return <div>{data}</div>;
}
```

### Passing

```tsx
import { useEffect, useState, useRef } from "react";

function MyComponent({ value }) {
  const [count, setCount] = useState(0);
  const ref = useRef(null);

  // âœ… setState and ref are stable â€” no need to include them
  useEffect(() => {
    setCount(value);
    ref.current = value;
  }, [value]);

  return <div>{count}</div>;
}
```

### Passing

```tsx
import { useMemo } from "react";

const MULTIPLIER = 2;

function MyComponent({ value }) {
  // âœ… Module-level constants are stable
  const result = useMemo(() => value * MULTIPLIER, [value]);
  return <div>{result}</div>;
}
```

### Failing

```tsx
import { useEffect, useState } from "react";

function MyComponent({ id, name }) {
  const [data, setData] = useState(null);

  // ðŸ”´ React Hook 'useEffect' has missing dependencies: 'name'.
  useEffect(() => {
    fetchData(id, name).then(setData);
  }, [id]);

  return <div>{data}</div>;
}
```

### Failing

```tsx
import { useEffect, useState } from "react";

function MyComponent({ id }) {
  const [data, setData] = useState(null);
  const [count, setCount] = useState(0);

  // ðŸ”´ React Hook 'useEffect' has unnecessary dependencies: 'count'.
  useEffect(() => {
    fetchData(id).then(setData);
  }, [id, count]);

  return <div>{data}</div>;
}
```

### Failing

```tsx
import { useCallback } from "react";

function MyComponent({ onClick }) {
  const deps = [onClick];

  // ðŸ”´ React Hook 'useCallback' was passed a dependency list that is not an array literal.
  const handler = useCallback(() => {
    onClick();
  }, deps);

  return <button onClick={handler}>Click</button>;
}
```

### Failing

```tsx
import { useEffect } from "react";

function MyComponent({ obj }) {
  // ðŸ”´ React Hook 'useEffect' has missing dependencies: 'obj.property'.
  useEffect(() => {
    console.log(obj.property);
  }, []);

  return null;
}
```

## Examples with `additionalHooks`

### Configuration

```json
{
  "react-x/exhaustive-deps": ["warn", {
    "additionalHooks": "useCustomEffect|useMyMemo"
  }]
}
```

### Failing

```tsx
function MyComponent({ id }) {
  // ðŸ”´ React Hook 'useCustomEffect' has missing dependencies: 'id'.
  useCustomEffect(() => {
    fetchData(id);
  }, []);

  return null;
}
```

### Passing

```tsx
function MyComponent({ id }) {
  // âœ… All dependencies are present
  useCustomEffect(() => {
    fetchData(id);
  }, [id]);

  return null;
}
```

## Implementation

- [Rule Source](https://github.com/Rel1cx/eslint-react/tree/main/packages/plugins/eslint-plugin-react-x/src/rules/exhaustive-deps.ts)
- [Test Source](https://github.com/Rel1cx/eslint-react/tree/main/packages/plugins/eslint-plugin-react-x/src/rules/exhaustive-deps.spec.ts)

## Further Reading

- [React Docs: `useEffect` Hook](https://react.dev/reference/react/useEffect)
- [React Docs: `useMemo` Hook](https://react.dev/reference/react/useMemo)
- [React Docs: `useCallback` Hook](https://react.dev/reference/react/useCallback)
- [React Docs: Removing Effect Dependencies](https://react.dev/learn/removing-effect-dependencies)
