---
title: exhaustive-deps
---

<Callout type="warning">
  This rule is currently in beta and only available in v3.0.0 beta releases.
</Callout>

**Full Name in [`@eslint-react/eslint-plugin@beta`](https://npmx.dev/package/@eslint-react/eslint-plugin)**

```plain copy
@eslint-react/exhaustive-deps
```

**Full Name in [`eslint-plugin-react-x@beta`](https://npmx.dev/package/eslint-plugin-react-x)**

```plain copy
react-x/exhaustive-deps
```

**Features**

`âš™ï¸` `ðŸ”§`

**Presets**

`recommended`
`recommended-typescript`
`recommended-type-checked`
`strict`
`strict-typescript`
`strict-type-checked`

## Description

Verifies the list of dependencies for Hooks like `useEffect` and similar.

React hooks like `useEffect`, `useMemo`, and `useCallback` accept dependency arrays. When a value referenced inside these hooks is not included in the dependency array, React won't re-run the effect or recalculate the value when that dependency changes. This causes stale closures where the hook uses outdated values.

If you find yourself fighting with this rule, you likely need to restructure your code rather than suppress the warning. See [Removing Effect Dependencies](https://react.dev/learn/removing-effect-dependencies) to learn how.

## Examples

### Failing

```tsx
import { useEffect } from "react";

function MyComponent({ userId }) {
  useEffect(() => {
    fetchUser(userId);
    //        ^^^^^^
    //        - 'userId' is missing from the dependency array.
  }, []); // Missing 'userId'
}
```

```tsx
import { useMemo } from "react";

function MyComponent({ items, sortOrder }) {
  const sorted = useMemo(() => {
    return items.sort(sortOrder);
    //                ^^^^^^^^^
    //                - 'sortOrder' is missing from the dependency array.
  }, [items]); // Missing 'sortOrder'
}
```

```tsx
import { useCallback } from "react";

function MyComponent({ onSave, value }) {
  const handleClick = useCallback(() => {
    onSave(value);
    //     ^^^^^
    //     - 'value' is missing from the dependency array.
  }, [onSave]); // Missing 'value'
}
```

### Passing

```tsx
import { useEffect } from "react";

function MyComponent({ userId }) {
  useEffect(() => {
    fetchUser(userId);
  }, [userId]);
}
```

```tsx
import { useMemo } from "react";

function MyComponent({ items, sortOrder }) {
  const sorted = useMemo(() => {
    return items.sort(sortOrder);
  }, [items, sortOrder]);
}
```

```tsx
import { useCallback } from "react";

function MyComponent({ onSave, value }) {
  const handleClick = useCallback(() => {
    onSave(value);
  }, [onSave, value]);
}
```

## Troubleshooting

### Adding a function dependency causes infinite loops

When a function is defined in the component body, it is recreated on every render, causing the effect to re-run endlessly:

```tsx
// âŒ Causes infinite loop â€” logItems is a new reference on every render
function MyComponent({ items }) {
  const logItems = () => {
    console.log(items);
  };

  useEffect(() => {
    logItems();
  }, [logItems]);
}
```

In most cases, move the function call out of the effect or inline the logic directly:

```tsx
// âœ… Inline the logic inside the effect
function MyComponent({ items }) {
  useEffect(() => {
    console.log(items);
  }, [items]);
}
```

If the function is genuinely needed as a stable reference, wrap it with `useCallback`:

```tsx
// âœ… useCallback keeps the function reference stable
function MyComponent({ items }) {
  const logItems = useCallback(() => {
    console.log(items);
  }, [items]);

  useEffect(() => {
    logItems();
  }, [logItems]);
}
```

### Running an effect only once on mount

You want to run an effect once on mount, but the linter complains about missing dependencies:

```tsx
// âŒ Missing dependency
function MyComponent({ userId }) {
  useEffect(() => {
    sendAnalytics(userId);
  }, []); // Missing 'userId'
}
```

The recommended fix is to include the dependency. If `userId` changes and you want the effect to re-run, this is the correct behavior:

```tsx
// âœ… Include the dependency
function MyComponent({ userId }) {
  useEffect(() => {
    sendAnalytics(userId);
  }, [userId]);
}
```

If you truly need to run once and read the latest value without reacting to changes, use a ref:

```tsx
// âœ… Use a ref guard if you only want to run once
function MyComponent({ userId }) {
  const sent = useRef(false);

  useEffect(() => {
    if (sent.current) return;
    sent.current = true;
    sendAnalytics(userId);
  }, [userId]);
}
```

## Options

### Rule Options

This rule accepts an optional configuration object:

```ts
type Options = {
  additionalHooks?: string;
  enableDangerousAutofixThisMayCauseInfiniteLoops?: boolean;
};
```

```json
{
  "react-x/exhaustive-deps": ["warn", {
    "additionalHooks": "(useMyCustomHook|useAnotherHook)"
  }]
}
```

#### `additionalHooks`

A regex string matching custom hooks that should be checked for exhaustive dependencies in the same way as `useEffect`, `useMemo`, and `useCallback`.

**Note:** When this rule-level option is specified, it takes precedence over the shared `settings` configuration described below.

#### `enableDangerousAutofixThisMayCauseInfiniteLoops`

When `true`, promotes the suggested fix to an auto-fix. This is dangerous â€” automatically adding all missing dependencies can introduce infinite loops in effects that intentionally omit dependencies. Use only as a one-time migration aid.

Default: `false`

### Shared Settings

Custom effect hooks can also be configured via shared ESLint settings, which apply consistently across all rules in the plugin:

```json
{
  "settings": {
    "react-x": {
      "additionalEffectHooks": "(useMyEffect|useCustomEffect)"
    }
  }
}
```

## Implementation

- [Rule Source](https://github.com/Rel1cx/eslint-react/tree/main/packages/plugins/eslint-plugin-react-x/src/rules/exhaustive-deps.ts)
- [Test Source](https://github.com/Rel1cx/eslint-react/tree/main/packages/plugins/eslint-plugin-react-x/src/rules/exhaustive-deps.spec.ts)

## Further Reading

- [React Docs: Removing Effect Dependencies](https://react.dev/learn/removing-effect-dependencies)
- [React Docs: `useEffect`](https://react.dev/reference/react/useEffect)
- [React Docs: `useCallback`](https://react.dev/reference/react/useCallback)
- [React Docs: `useMemo`](https://react.dev/reference/react/useMemo)
- [React Docs: `exhaustive-deps` Lint Rule](https://react.dev/reference/eslint-plugin-react-hooks/lints/exhaustive-deps)

---

## See Also

- [`rules-of-hooks`](./rules-of-hooks)\
  Validates that components and hooks follow the Rules of Hooks.
- [`use-memo`](./use-memo)\
  Validates that `useMemo` is called with a callback that returns a value.
- [`use-state`](./use-state)\
  Enforces correct usage of the `useState` hook.
